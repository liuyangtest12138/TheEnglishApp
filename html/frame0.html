<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <title>AUI快速完成布局</title>
    <link rel="stylesheet" type="text/css" href="../css/aui.css" />
    <link rel="stylesheet" type="text/css" href="../css/aui-flex.css" />
    <link rel="stylesheet" type="text/css" href="../css/aui-slide.css" />
    <style type="text/css">
        img.icon {
            display: block;
            margin: 0 auto;
            width: 60%;
        }
        .aui-grid-label {
            padding-top: 0.5rem;
            font-size: 0.7rem !important;
        }
        .goods-item {
            border: 1px solid #eee;
            text-align: center;
            padding: 0.5rem;
        }
        .goods-item img {
            display: block;
            width: 100%;
            height: 7rem;
        }
        .title {
            color: #666;
            font-size: 0.8rem;
            text-align: center;
        }
        .title p {
            font-size: 0.6rem;
            color: #ccc;
        }
        .goods-title {
            font-size: 0.7rem;
            color: #333 !important;
        }
        .hot img {
            width: 3rem;
            display: block;
            margin: 0 auto;
        }
    </style>
</head>
<body>
    <section class="aui-content">
        <div id="aui-slide">
            <div class="aui-slide-wrap">
                <div class="aui-slide-node">
                    <img src="" id="lunbo0"/>
                </div>
                <div class="aui-slide-node">
                    <img src="" id="lunbo1"/>
                </div>
                <div class="aui-slide-node">
                    <img src="" id="lunbo2"/>
                </div>
            </div>
            <div class="aui-slide-page-wrap"><!--分页容器--></div>
        </div>
    </section>
    <section class="aui-content aui-margin-b-15">
        <div class="aui-grid aui-padded-l-10 aui-padded-r-10">
            <div class="aui-row aui-row-padded">
                <div class="aui-col-5" onclick="toWordWin()">
                    <img src="../image/demo/i1.png" class="icon">
                    <div class="aui-grid-label">单词</div>
                </div>
                <div class="aui-col-5" onclick="toArticleWin()">
                    <img src="../image/demo/i3.png" class="icon">
                    <div class="aui-grid-label">文章</div>
                </div>
                <div class="aui-col-5" onclick="toDynamicList()">
                    <img src="../image/demo/i2.png" class="icon">
                    <div class="aui-grid-label">动态</div>
                </div>
                <div class="aui-col-5" onclick="toMyAttentionWin()">
                    <img src="../image/demo/i4.png" class="icon">
                    <div class="aui-grid-label">关注</div>
                </div>
                <div class="aui-col-5" onclick="toNoteWin()">
                    <img src="../image/demo/i5.png" class="icon">
                    <div class="aui-grid-label">单词本</div>
                </div>
            </div>
        </div>
    </section>
    <section class="aui-content aui-margin-b-15" style="background-color: #fff;">
        <div class="aui-row aui-row-padded hot">
            <div class="aui-col-xs-4 aui-padded-15 aui-border-r" onclick="toArticleText(0)" style="height: 10rem;">
                <h3 class="aui-text-danger">每日一文</h3>
                <p class="aui-text-danger">标题：<span id="articleTitle"></span></p>
                <p>作者：<span id="articleAuther"></span></p>
                <div class="aui-col-xs-20"><img src="" id="articleImg"></div>
            </div>
            <div class="aui-col-xs-8 aui-padded-b-0 aui-padded-l-0">
                <div class="aui-col-xs-12 aui-border-b" style="overflow: hidden; height: 4rem">
                    <div class="aui-col-xs-9">
                        <h3 class="aui-text-info">每日一词</h3>
                        <p class="aui-text-danger">英文：<span id="wordEng"></span></p>
                        <p>中文：<span id="wordChi"></span></p>
                    </div>
                    <div class="aui-col-xs-3"><img id="wordImg" src=""></div>
                </div>
                <div class="aui-col-xs-6 aui-border-r" style="height: 5.875rem;">
                    <h5 class="aui-text-warning">上次测试成绩</h5>
                    <p class="aui-text-danger">总计： &nbsp;&nbsp;&nbsp;<span id="resultTot"></span>分</p>
                    <p class="aui-text-danger">正确： &nbsp;&nbsp;&nbsp;<span id="resultTrue"></span>分</p>
                    <p class="aui-text-danger">错误： &nbsp;&nbsp;&nbsp;<span id="resultError"></span>分</p>
                </div>
                <div class="aui-col-xs-6">
                    <h5 class="aui-text-success">翻译</h5>
                    <p>都帮你整理好啦</p>
                    <img src="../image/f5.jpg">
                </div>
            </div>
        </div>
    </section>
    <div class="aui-content">
        <div class="aui-card-list">
            <div class="aui-card-list-header">
                <div></div>
                <div class="title">
                    /&nbsp;&nbsp;经典推荐&nbsp;&nbsp;/
                    <p>Recommend</p>
                </div>
                <div></div>
            </div>
            <div class="aui-card-list-content-padded">
                <div class="aui-row aui-row-padded" id="recommendArticle">
                    <div class="aui-col-xs-6" onclick="toArticleText(1)">
                        <div class=" goods-item">
                            <img src="" id="recommendImg1">
                            <p class="aui-border-t aui-margin-t-10 aui-padded-t-10 goods-title aui-ellipsis-2" id="recommendName1"></p>
                            <p class="aui-padded-t-5">作者：<span class="aui-text-danger" id="recommendAuto1"></span></p>
                        </div>
                    </div>
                    <div class="aui-col-xs-6" onclick="toArticleText(2)">
                        <div class=" goods-item">
                            <img src="" id="recommendImg2">
                            <p class="aui-border-t aui-margin-t-10 aui-padded-t-10 goods-title aui-ellipsis-2" id="recommendName2"></p>
                            <p class="aui-padded-t-5">作者：<span class="aui-text-danger" id="recommendAuto2"></span></p>
                        </div>
                    </div>
                    <div class="aui-col-xs-6" onclick="toArticleText(3)">
                        <div class=" goods-item">
                            <img src="" id="recommendImg3">
                            <p class="aui-border-t aui-margin-t-10 aui-padded-t-10 goods-title aui-ellipsis-2" id="recommendName3"></p>
                            <p class="aui-padded-t-5">作者：<span class="aui-text-danger" id="recommendAuto3"></span></p>
                        </div>
                    </div>
                    <div class="aui-col-xs-6" onclick="toArticleText(4)">
                        <div class=" goods-item">
                            <img src="" id="recommendImg4">
                            <p class="aui-border-t aui-margin-t-10 aui-padded-t-10 goods-title aui-ellipsis-2" id="recommendName4"></p>
                            <p class="aui-padded-t-5">作者：<span class="aui-text-danger" id="recommendAuto4"></span></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
<script type="text/javascript" src="../script/api.js"></script>
<script type="text/javascript" src="../script/aui-slide.js"></script>
<script type="text/javascript">
    var urlHeader = getCookie('urlHeader');
    var theArticleContent;
    var reArtContent = [];
    var slide = new auiSlide({
        container:document.getElementById("aui-slide"),
        "height":160,
        "speed":300,
        "pageShow":true,
        "pageStyle":'dot',
        "loop":true,
        'dotPosition':'center'
    })
    function toDynamicList(){
      api.sendEvent({
          name: 'tiaoZhuan',
          extra: {
              pageIndex: '2'
          }
      });

    }
    function toArticleText(index){
      var contentPath;
      if(index == 0){
        contentPath = theArticleContent;
      }else {
        contentPath = reArtContent[index].contentPath;
      }
      api.openWin({
          name: 'article_text_win',
          url: './article_text_win.html',
          pageParam: {
              contentPath: contentPath
          }
      });
    }
    function toWordWin(){
      api.openWin({
          name: 'word_win',
          url: './word_win.html',
          pageParam: {
              name: 'test'
          }
      });
    }
    function toArticleWin(){
      api.openWin({
          name: 'article_win',
          url: './article_win.html',
          pageParam: {
              name: 'test'
          }
      });
    }
    function toMyAttentionWin(){
      api.openWin({
          name: 'my_attention_win',
          url: './my_attention_win.html',
          pageParam: {
              name: 'test'
          }
      });
    }
    function toNoteWin(){
      api.openWin({
          name: 'note_win',
          url: './note_win.html',
          pageParam: {
              name: 'test'
          }
      });
    }
    function getCookie(key) {
        var cookieArr = document.cookie.split('; ');
        for(var i = 0; i < cookieArr.length; i++) {
            var arr = cookieArr[i].split('=');
            if(arr[0] === key) {
                return arr[1];
            }
        }
        return false;
    }
    apiready = function() {
      var userPhone = getCookie('userPhone');
      // console.log(userPhone);
      api.ajax({
        url: urlHeader+'/page/talk/theTalk',
        method: 'post',
        dataType: 'json',
        returnAll: false,
        data: {
            values:{ //you参数
                  userPhone: userPhone
            }
        }
    }, function(ret, err) {
        if (ret) {
          if(ret.code != 200){
            // console.log(ret.code);
            alert(ret.message);
          }else{
            // console.log(ret.result.lunBos);
            var lunboList = ret.result.lunBos;
            for(var i = 0;i<lunboList.length;i++){
              var lunbo = $api.byId('lunbo'+i);
              // console.log(lunboList[i].lunboPath);
              $api.attr(lunbo, 'src', urlHeader+'/images/'+lunboList[i].lunboPath);
            }
            var article = ret.result.theArticle;
            theArticleContent = article.contentPath;
            $api.text($api.byId('articleTitle'),article.title);
            $api.text($api.byId('articleAuther'),article.userName);
            // console.log(urlHeader+'/images/'+article.titleImage);
            $api.attr($api.byId('articleImg'),'src',urlHeader+'/images/'+article.titleImage);
            var word = ret.result.theWord;
            $api.text($api.byId('wordEng'),word.wordContent);
            $api.text($api.byId('wordChi'),word.wordChinese);
            // console.log(urlHeader+'/images/'+word.wordImage);
            $api.attr($api.byId('wordImg'),'src',urlHeader+'/images/'+word.wordImage);
            var lastResult = ret.result.lastResult;
            if(lastResult != null) {
              $api.text($api.byId('resultTot'),lastResult.wordTotle);
              $api.text($api.byId('resultTrue'),lastResult.trueNum);
              $api.text($api.byId('resultError'),lastResult.errorNum);
            }
            var theArticleList = ret.result.theArticleList;
            reArtContent = theArticleList;
            for (var j = 1;j<=theArticleList.length;j++) {
              $api.attr($api.byId('recommendImg'+j), 'src', urlHeader+'/images/'+theArticleList[j-1].titleImage);
              $api.text($api.byId('recommendName'+j),theArticleList[j-1].title);
              $api.text($api.byId('recommendAuto'+j),theArticleList[j-1].userName);
            }
          }
        }
    })
    }
</script>
</html>
